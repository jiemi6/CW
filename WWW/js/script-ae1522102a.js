function open_(){window.open("http://njmm.livechatvalue.com/chat/chatClient/chatbox.jsp?companyID=26085&jid=6312813467","在线客服","width=590,height=550")}function renderTpl(t,e){return t.replace(/\{%\=(\w+)%\}/g,function(t,i){return null!=e[i]?e[i]:""})}function initQuery(){var t=$("#NewsDiv"),e=$("#newsTpl").html();$.ajax({url:Config.NewsUrl+"?action=getlist&number=13",dataType:"jsonp",jsonp:"callback",success:function(i){t.empty();for(var n=0,s=i.length;n<s;n++){var r=i[n];r.title=r.title.replace(/<[^>]+>/g,""),r.time=r.published_time.substring(5,10),t.append(renderTpl(e,r))}NewsController.clickEvent()},error:function(e,i,n){t.empty(),t.append("<span style='color:red'>网络通信异常，暂时无法获取公告，请连接VPN后再进行尝试！</span>")}})}function refresh(){speedTest.refresh()}function invalidDomain(t,e){void 0==this.speedTest.errorKeyvalue[t]&&(this.speedTest.errorKeyvalue[t]=0,this.speedTest.error.push({url:t,index:e}),this.speedTest.error.length>=speedTest.totalCount&&Vpn.show())}function rSuccess(t,e){void 0==this.speedTest.completeKeyvalue[e]&&(this.speedTest.completeKeyvalue[e]=0,this.speedTest.loadingCompletedad(t,e))}var Config={NewsUrl:"http://www.163xc.com/_api/notice.php",AirSpeedtestUrl:"http://yw.xcnice.com/yw-update/sincai_speedtest_v1.0.1.exe",DomainUrls:["{JD}http://scbar688.net","{JD}http://scbar688.com","http://www.xingcai24.com","http://www.vvssc.net","http://www.sscshishi.com","http://www.sisssc.net","http://lovesincai.com","http://www.x8shishi.com","http://www.xing01.com","http://www.xingcai1714.com","http://x8sincai.com","http://s8shishicai.com","http://s8sincai.com","http://mmssc.net","http://my88xc.com","http://nicessc.com"]};$(function(){$("#icon-air").attr("href",Config.AirSpeedtestUrl),$("img[isrc]").each(function(){this.setAttribute("src",this.getAttribute("isrc"))})}),initQuery();var NewsController={clickEvent:function(){var t=$("#popup-container"),e=t.find(".popup-content-text");$(".body-right .news-item").click(function(){var i=this.getAttribute("title"),n='<h3 class="c-title">'+i+"</h3>";e.html(n+"数据加载中，请稍后！"),$.ajax({url:Config.NewsUrl+"?action=getcontent&id="+this.getAttribute("id"),dataType:"jsonp",jsonp:"callback",success:function(t){e.html(t?n+'<div class="c-content">'+t.content+"</div>":n+"<span>系统出错，我们正在解决，请稍后！</span>")},error:function(t,n,s){e.html('<h3 class="c-title">'+i+"</h3><span>系统出错，我们正在解决，请稍后！【"+t.readyState+"】</span>")}}),t.css("display","block")}),$("#popup-close").click(function(){t.css("display","none")})}},orgUrls=[],getSplitUrls=function(t,e){if(t>=e.length)return e;for(var i=[],n=e.length-1,s={},r=0;;){var o=Math.ceil(Math.random()*n);if(void 0==s[o]&&(i.push(e[o]),s[o]=0,r++),r>=t)break}return i},SpeedTest=function(t){orgUrls=t,t=getSplitUrls(16,t);var e=function(){this.complete=[],this.completeKeyvalue={},this.error=[],this.errorKeyvalue={},this.totalCount=t.length,this.$listDomain=$("#listDomain"),this.$bestLine=$("#bestLine"),this.domainResponseTpl=$("#domainResponseTpl").html(),this.domainValidTpl=$("#domainValidTpl").html(),this.effCount=0,this.displayNumber=10,this.initQueryable=!1,this.stopCount=20,this.timerInterval=500,this.create(t),this.timer(this.timerInterval)};return e.prototype={refresh:function(){this.clean(),t=getSplitUrls(15,orgUrls),this.create(t),this.timer(this.timerInterval)},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)})},clean:function(){this.effCount=0,this.complete.length=0,this.error.length=0,this.errorKeyvalue={},this.completeKeyvalue={},this.cleanHighlight(),clearInterval(this.Interval)},create:function(t){this.$listDomain.empty();for(var e=0;e<this.totalCount;e++){var i=(new Date).getTime(),n=t[e].split("}"),s=void 0;1==n.length?(n=n[0],s="{PT"):2==n.length&&(s=n[0],n=n[1]),this.$listDomain.append(renderTpl(this.domainResponseTpl,{type:s,top:54*e,url:n,i:e,stime:i,uid:i}))}},loadingCompletedad:function(t,e){this.complete.push({url:e,type:t.getAttribute("type"),dif:parseInt(((new Date).getTime()-t.getAttribute("stime"))/10)})},sort:function(){this.complete.sort(function(t,e){return t.dif-e.dif})},displayDomainList:function(){this.$bestLine.empty();for(var t=1,e=0,i=this.complete.length;e<i;e++){if(t>=11){this.stopTimer();break}var n=this.complete[e];void 0==n.addable&&(this.$bestLine.append(renderTpl(this.domainValidTpl,{top:54*(t-1)+"px",url:n.url,aurl:n.url,ms:t+3,i:e,style:"",opentext:"直接打开",uid:this.uuid()})),t++)}var i=11-t;if(t<=10&&this.error.length>0&&i<this.error.length)for(var s=0;s<i;s++)this.$bestLine.append(renderTpl(this.domainValidTpl,{top:54*(s+t-1)+"px",url:this.error[s].url||"&nbsp;&nbsp;",aurl:"javascript:void(0);",ms:"--",i:e,style:'style="color:red"',opentext:"失效",uid:this.uuid()}))},timer:function(t){var e=this,i=1;e.Interval=setInterval(function(){(e.complete.length>=e.totalCount||i>=e.stopCount)&&e.stopTimer(),e.sort(),e.displayDomainTop(),e.displayDomainList(),i++},t)},checkCount:function(t){for(var e=0,i=0,n=this.complete.length;i<n;i++)this.complete[i].type==t&&e++;return e},stopTimer:function(){clearInterval(this.Interval)},displayDomainTop:function(){if(this.complete.length>=1&&0==this.initQueryable&&(this.initQueryable=!0,Config.NewsUrl=this.complete[0].url+"/_api/notice.php",initQuery()),this.checkCount("{PT")>=3){for(var t=1,e=0,i=this.complete.length;e<i;e++){var n=this.complete[e];if(this.isPT(n)){if(t>=4)break;n.addable=!0,$("#fastestA"+t).attr("href",n.url),$("#fastestURL"+t).html(n.url),$("#huadong"+t).attr("href",n.url),t++}}this.highlightEffect()}},isPT:function(t){return"{PT"===t.type},isJD:function(t){return"{JD"==t.type},cleanHighlight:function(){for(var t=1;t<=3;t++)$("#fastestA"+t).attr("href","javascript:void(0);"),$("#fastestURL"+t).html();this.hideOpenGif()},highlightEffect:function(){if(0==this.effCount)var t=this,e=setInterval(function(){$("#huadong1 img").css("left",-40).stop(!0).animate({left:140},1200),$("#huadong2 img").css("left",-40).stop(!0).animate({left:140},1200),$("#huadong3 img").css("left",-40).stop(!0).animate({left:140},1200),t.effCount++,t.effCount>=3&&(clearInterval(e),t.displayOpenGif())},1100)},displayOpenGif:function(){setTimeout(function(){$(".link-gif").css("display","block"),$(".priority-item .link").css("display","none")},2e3)},hideOpenGif:function(){$(".link-gif").css("display","none"),$(".priority-item .link").css("display","block")}},new e},Vpn={show:function(){speedTest.cleanHighlight(),$(".vpn-container").fadeIn()},hide:function(){$(".vpn-container").fadeOut()},refresh:function(){this.hide(),speedTest.refresh()}},speedTest=new SpeedTest(Config.DomainUrls);